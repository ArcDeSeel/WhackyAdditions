[modification]
	id=chaosspin
	name="Spinning Chaos"
	description="Destroy the map."
	require_modification=yes
	[options]
		[slider]
			id=spinturn
			default=2
			min=1
			max=50
			name="Start:"
			description="On which turn should it start?"
		[/slider]
	[/options]
	[event]
		name=prestart
	[/event]
	[event]
		name=side_turn
		first_time_only=no
		[if]
			[variable]
				name=turn_number
				greater_than_equal_to=$spinturn
			[/variable]
			[then]
				[remove_item]
					x,y=$xes[$side_number],$yes[$side_number]
				[/remove_item]
				[label]
					x,y=$xes[$side_number],$yes[$side_number]
					text=
				[/label]
				{WHEEL 60DEGREES_CLOCKWISE yes yes $xes[$side_number] $yes[$side_number] $radii[$side_number]}
			[/then]
		[/if]
	[/event]
	[event]
		name=side_turn
		first_time_only=no
		[store_map_dimensions]
		[/store_map_dimensions]
		{VARIABLE_OP x rand 1..$map_size.width}
		{VARIABLE_OP y rand 1..$map_size.height}
		{VARIABLE_OP southlimit to_variable map_size.height}
		{VARIABLE_OP southlimit sub $y}
		{VARIABLE_OP northlimit to_variable y}
		{VARIABLE_OP northlimit sub 1}
		{VARIABLE_OP eastlimit to_variable map_size.width}
		{VARIABLE_OP eastlimit sub $x}
		{VARIABLE_OP westlimit to_variable x}
		{VARIABLE_OP westlimit sub 1}
		{VARIABLE_OP limit to_variable northlimit}
		[if]
			[variable]
				name=eastlimit
				less_than=$limit
			[/variable]
			[then]
				{VARIABLE_OP limit to_variable eastlimit}
			[/then]
		[/if]
		[if]
			[variable]
				name=southlimit
				less_than=$limit
			[/variable]
			[then]
				{VARIABLE_OP limit to_variable southlimit}
			[/then]
		[/if]
		[if]
			[variable]
				name=westlimit
				less_than=$limit
			[/variable]
			[then]
				{VARIABLE_OP limit to_variable westlimit}
			[/then]
		[/if]
		{VARIABLE_OP radius rand 1..$limit}
		{VARIABLE_OP xes[$side_number] value $x}
		{VARIABLE_OP yes[$side_number] value $y}
		{VARIABLE_OP radii[$side_number] value $radius}

			{VARIABLE_OP sturnnum value $turn_number}
			{VARIABLE_OP sturnnum add 1}
		[item]
			x,y=$xes[$side_number],$yes[$side_number]
			halo=arrows3.png
		[/item]
		[label]
			x,y=$xes[$side_number],$yes[$side_number]
			text=Spin: Turn $sturnnum, Side $side_number, Radius $radii[$side_number]
		[/label]
	[/event]
[/modification]
