#define MOVECOSTSETFORTYPESMALLRANGE NAME
	[set_variable]
		name={NAME}ca
		rand=-50%,-50%,-25%,0%,0%,0%,0%,33%,100%,100%
	[/set_variable]
#enddef
#define DEFORRESCOSTSETFORTYPERANGE NAME
	[set_variable]
		name={NAME}dt
		rand=-10%,-9%,-8%,-7%,-6%,-5%,-4%,-3%,-2%,-1%,0%,1%,2%,3%,4%,5%,6%,7%,8%,9%,10%
	[/set_variable]
#enddef
#define EVOLVE_UNITS_AWKN SIDE BABYSIDE
    [event]
	name=pre advance
	first_time_only=no
	[message]
		message="pre advance"
	[/message]
	[store_unit]
		[filter]
			x,y=$x1,$y1
		[/filter]
		variable=dna
		kill=no
	[/store_unit]
    [/event]
    [event]
	name=post advance
	first_time_only=no
	[message]
		message="post advance"
	[/message]
	[if]
		[variable]
			name=unit.side
			equals={SIDE}
		[/variable]
		[then]
			[set_variable]
				name=nummuts
				value=0
			[/set_variable]
			[switch]
				variable=dna.race
				[case]
					value=abysian
					[set_variable]
						name=type
						rand=AWKN_Abysian_Axe_Infantry,AWKN_Abysian_Flail_Infantry,AWKN_Abysian_Assassin,AWKN_Abysian_Anathemant_Salamander
					[/set_variable]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=demonbred
					[set_variable]
						name=type
						rand=AWKN_Abysian_Demonbred
					[/set_variable]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=ctissian
					[set_variable]
						name=type
						rand=AWKN_Ctissian_Heavy_Infantry, AWKN_Ctissian_Light_Infantry, AWKN_Ctissian_Initiate
					[/set_variable]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=pred
					[set_variable]
						name=type
						rand=AWKN_Ctissian_Fighter
					[/set_variable]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=atlantian
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[switch]
						variable=dna.type
						[case]
							value=AWKN_Atlantian_Coastal_Spearman, AWKN_Atlantian_Coastal_Warrior
							[set_variable]
								name=type
								rand=AWKN_Atlantian_Coastal_Spearman
							[/set_variable]
						[/case]
						[else]
							[set_variable]
								name=type
								rand=AWKN_Atlantian_Oceanic_Spearman, AWKN_Atlantian_Oceanic_Apprentice
							[/set_variable]
						[/else]
					[/switch]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=deep
					[set_variable]
						name=type
						rand=AWKN_Atlantian_Deep
					[/set_variable]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=bats
					[set_variable]
						name=type
						rand=Vampire Bat
					[/set_variable]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=drake
					[set_variable]
						name=type
						rand=Drake Burner,Drake Clasher,Drake Fighter,Drake Glider
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
				[/case]
				[case]
					value=dwarf
					[set_variable]
						name=type
						rand=Dwarvish Fighter,Dwarvish Thunderer,Dwarvish Guardsman,Dwarvish Scout,Dwarvish Ulfserker,Dwarvish Fighter,Dwarvish Thunderer,Dwarvish Guardsman,Dwarvish Scout,Dwarvish Ulfserker,Gryphon Rider
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
				[/case]
				[case]
					value=elf
					[set_variable]
						name=type
						rand=Elvish Archer,Elvish Fighter,Elvish Shaman,Elvish Scout
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
				[/case]
				[case]
					value=gryphon
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[switch]
						variable=dna.type
						[case]
							value=Gryphon Rider, Gryphon Master
							[set_variable]
								name=type
								rand=Dwarvish Fighter,Dwarvish Thunderer,Dwarvish Guardsman,Dwarvish Scout,Dwarvish Ulfserker,Gryphon Rider
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
						[else]			
							[set_variable]
								name=type
								rand=Gryphon
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/else]
					[/switch]
				[/case]
				[case]
					value=human
					[switch]
						variable=dna.type
						[case]
							value=Peasant,Woodsman,Ruffian
							[set_variable]
								name=numbabs
								value=0
							[/set_variable]
						[/case]
						[case]
							value=Dark Adept
							[store_unit]
								[filter]
									x=$x1
									y=$y1
								[/filter]
								variable=mutant
								kill=no
							[/store_unit]
							{VARIABLE_OP mutant.id value "mutant"}
							[unstore_unit]
								variable=mutant
								replace=yes
							[/unstore_unit]
							[message]
								message="setting nummuts"
							[/message]
							[set_variable]
								name=nummuts
								value=1
							[/set_variable]
							[set_variable]
								name=numbabs
								value=2
							[/set_variable]
							[set_variable]
								name=type
								rand=Skeleton,Skeleton Archer,Walking Corpse,Ghost,Ghoul
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
						[case]
							value=Dark Sorcerer
							[store_unit]
								[filter]
									x=$x1
									y=$y1
								[/filter]
								variable=mutant
								kill=no
							[/store_unit]
							{VARIABLE_OP mutant.id value "mutant"}
							[unstore_unit]
								variable=mutant
								replace=yes
							[/unstore_unit]
							[message]
								message="setting nummuts"
							[/message]
							[set_variable]
								name=nummuts
								value=1
							[/set_variable]
							[set_variable]
								name=numbabs
								value=3
							[/set_variable]
							[set_variable]
								name=type
								rand=Bone Shooter,Revenant,Deathblade,Chocobone,Necrophage,Soulless,Shadow,Wraith
							[/set_variable]
							[set_variable]
								name=type2
								rand=Bone Shooter,Revenant,Deathblade,Chocobone,Necrophage,Soulless,Shadow,Wraith
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type2
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
						[case]
							value=Necromancer
							[store_unit]
								[filter]
									x=$x1
									y=$y1
								[/filter]
								variable=mutant
								kill=no
							[/store_unit]
							{VARIABLE_OP mutant.id value "mutant"}
							[unstore_unit]
								variable=mutant
								replace=yes
							[/unstore_unit]
							[message]
								message="setting nummuts"
							[/message]
							[set_variable]
								name=nummuts
								value=1
							[/set_variable]
							[set_variable]
								name=numbabs
								value=7
							[/set_variable]
							[set_variable]
								name=type
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectrenn
							[/set_variable]
							[set_variable]
								name=type2
								rand=Bone Shooter,Revenant,Deathblade,Chocobone,Necrophage,Soulless,Shadow,Wraith
							[/set_variable]
							[set_variable]
								name=type3
								rand=Bone Shooter,Revenant,Deathblade,Chocobone,Necrophage,Soulless,Shadow,Wraith
							[/set_variable]
							[set_variable]
								name=type4
								rand=Skeleton,Skeleton Archer,Walking Corpse,Ghost,Ghoul
							[/set_variable]
							[set_variable]
								name=type5
								rand=Skeleton,Skeleton Archer,Walking Corpse,Ghost,Ghoul
							[/set_variable]
							[set_variable]
								name=type6
								rand=Skeleton,Skeleton Archer,Walking Corpse,Ghost,Ghoul
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type2
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type3
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type4
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type5
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type6
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
						[else]
							[set_variable]
								name=numbabs
								value=1
							[/set_variable]
							[set_variable]
								name=type
								rand=Bowman,Cavalryman,Fencer,Heavy Infantryman,Horseman,Sergeant,Spearman,Mage,Dark Adept,Footpad,Thief,Poacher,Thug
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/else]
					[/switch]
				[/case]
				[case]
					value=monster
					[switch]
						variable=dna.type
						[case]
							value=mudcrawler
							[set_variable]
								name=numbabs
								value=3
							[/set_variable]
							[set_variable]
								name=type
								rand=Mudcrawler
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
						[else]
							[set_variable]
								name=numbabs
								value=1
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/else]
					[/switch]
				[/case]
				[case]
					value=naga
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[set_variable]
						name=type
						rand=Naga Fighter
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=merman
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[set_variable]
						name=type
						rand=Merman Fighter,Merman Hunter,Mermaid Initiate
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=ogres
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[set_variable]
						name=type
						rand=Young Ogre
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=orc
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[set_variable]
						name=type
						rand=Orcish Assassin,Orcish Archer,Orcish Grunt,Orcish Leader,Goblin Spearman,Goblin Spearman,Goblin Spearman,Wolf Rider
					[/set_variable]
					[set_variable]
						name=exgob
						rand=1,2
					[/set_variable]
					[if]
						[variable]
							name=exgob
							equals=2
						[/variable]
						[then]
							[set_variable]
								name=numbabs
								value=2
							[/set_variable]
							[set_variable]
								name=type2
								rand=Goblin Spearman,Goblin Spearman,Goblin Spearman,Wolf Rider
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type2
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/then]
					[/if]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=goblin
					[switch]
						variable=dna.type
						[case]
							value=Goblin Spearman
							[set_variable]
								name=numbabs
								value=0
							[/set_variable]
						[/case]
						[else]
							[set_variable]
								name=numbabs
								value=1
							[/set_variable]
							[set_variable]
								name=type
								rand=Goblin Spearman,Goblin Spearman,Wolf Rider
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/else]
					[/switch]
				[/case]
				[case]
					value=lizard
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[set_variable]
						name=type
						rand=Saurian Skirmisher,Saurian Skirmisher,Saurian Augur
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=troll
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[set_variable]
						name=type
						rand=Troll Whelp
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						{TRAIT_LOYAL}
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
				[case]
					value=undead
					[switch]
						variable=dna.type
						[case]
							value=Lich
							[store_unit]
								[filter]
									x=$x1
									y=$y1
								[/filter]
								variable=mutant
								kill=no
							[/store_unit]
							{VARIABLE_OP mutant.id value "mutant"}
							[unstore_unit]
								variable=mutant
								replace=yes
							[/unstore_unit]
							[message]
								message="setting nummuts"
							[/message]
							[set_variable]
								name=nummuts
								value=1
							[/set_variable]
							[set_variable]
								name=numbabs
								value=4
							[/set_variable]
							[set_variable]
								name=type
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectre,Lich
							[/set_variable]
							[set_variable]
								name=type2
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectre
							[/set_variable]
							[set_variable]
								name=type3
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectre
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type2
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type3
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
						[case]
							value=Ancient Lich
							[set_variable]
								name=numbabs
								value=5
							[/set_variable]
							[store_unit]
								[filter]
									x=$x1
									y=$y1
								[/filter]
								variable=mutant
								kill=no
							[/store_unit]
							{VARIABLE_OP mutant.id value "mutant"}
							[unstore_unit]
								variable=mutant
								replace=yes
							[/unstore_unit]
							[set_variable]
								name=nummuts
								value=1
							[/set_variable]
							[set_variable]
								name=type
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectre,Lich
							[/set_variable]
							[set_variable]
								name=type2
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectre
							[/set_variable]
							[set_variable]
								name=type3
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectre
							[/set_variable]
							[set_variable]
								name=type4
								rand=Banebow,Draug,Ghast,Nightgaunt,Spectre
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type2
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type3
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
							[unit]
								x,y=$x1,$y1
								type=$type4
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
					[/switch]
				[/case]
				[case]
					value=wolf
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[switch]
						variable=dna.type
						[case]
							value=Wolf Rider,Goblin Pillager,Goblin Knight,Direwolf Rider
							[set_variable]
								name=type
								rand=Goblin Spearman,Goblin Spearman,Wolf Rider
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
						[case]
							value=Wolf
							[set_variable]
								name=type
								rand=Wolf
							[/set_variable]
							[unit]
								x,y=$x1,$y1
								type=$type
								side={BABYSIDE}
								placement=map_passable
								id="baby"
								moves=0
								attacks_left=0
								{TRAIT_LOYAL}
								[insert_tag]   
									name=modifications
									variable=dna.modifications
								[/insert_tag]
							[/unit]
						[/case]
					[/switch]
				[/case]
				[case]
					value=wose
					[set_variable]
						name=numbabs
						value=1
					[/set_variable]
					[set_variable]
						name=type
						rand=Wose
					[/set_variable]
					[unit]
						x,y=$x1,$y1
						type=$type
						side={BABYSIDE}
						placement=map_passable
						id="baby"
						moves=0
						attacks_left=0
						[insert_tag]   
							name=modifications
							variable=dna.modifications
						[/insert_tag]
					[/unit]
				[/case]
			[/switch]
			{REPEAT $numbabs (
				[store_unit]
					[filter]
						id=baby
					[/filter]
					variable=baby
					kill=no
				[/store_unit]
				[set_variable]
					name=baby.name
					value="$baby.name| $dna.name|sson"
				[/set_variable]
				[unstore_unit]
					variable=baby
					replace=yes
				[/unstore_unit]
				{EVOLVETHE baby}
			)}
			[message]
				message="number: "
			[/message]
			[message]
				message=$nummuts
			[/message]
			{REPEAT $nummuts (
				[message]
					message="mutant!"
				[/message]
				{EVOLVETHE mutant}
			)}
		[/then]
	[/if]
[/event]
#enddef
#define EVOLVETHE ID
			[set_variable]
				name=m_damage
				rand=-50%,-40%,-40%,-30%,-30%,-30%,-20%,-20%,-20%,-20%,-10%,-10%,-10%,-10%,-10%,0%,0%,0%,0%,0%,0%,11%,11%,11%,11%,11%,25%,25%,25%,25%,43%,43%,43%,67%,67%,100%
			[/set_variable]
			[set_variable]
				name=m_attacks
				rand=-26%,-13%,-13%,-6%,-5%,-4%,-3%,0%,0%,6%,8%,10%,12%,25%,25%,51%
			[/set_variable]
			[set_variable]
				name=m_type
				rand=same,same,same,same,same,same,blade,pierce,impact,fire,cold,arcane
			[/set_variable]
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=attack
					range=melee
					increase_damage=$m_damage
					increase_attacks=$m_attacks
				[/effect]
				silent=yes
			[/object]
			[if]
				[not]
					[variable]
						name=m_type
						equals=same
					[/variable]
				[/not]
				[then]
					[object]
						[filter]
							id={ID}
						[/filter]
						[effect]
							apply_to=attack
							range=melee
							set_type=$m_type
						[/effect]
						silent=yes
					[/object]
				[/then]
			[/if]
# RANGED
			[set_variable]
				name=r_damage
				rand=-50%,-40%,-40%,-30%,-30%,-30%,-20%,-20%,-20%,-20%,-10%,-10%,-10%,-10%,-10%,0%,0%,0%,0%,0%,0%,11%,11%,11%,11%,11%,25%,25%,25%,25%,43%,43%,43%,67%,67%,100%
			[/set_variable]
			[set_variable]
				name=r_attacks
				rand=-26%,-13%,-13%,-6%,-5%,-4%,-3%,0%,0%,6%,8%,10%,12%,25%,25%,51%
			[/set_variable]
			[set_variable]
				name=r_type
				rand=same,same,same,same,same,same,blade,pierce,impact,fire,cold,arcane
			[/set_variable]
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=attack
					range=ranged
					increase_damage=$r_damage
					increase_attacks=$r_attacks
				[/effect]
				silent=yes
			[/object]
			[if]
				[not]
					[variable]
						name=r_type
						equals=same
					[/variable]
				[/not]
				[then]
					[object]
						[filter]
							id={ID}
						[/filter]
						[effect]
							apply_to=attack
							range=ranged
							set_type=$r_type
						[/effect]
						silent=yes
					[/object]
				[/then]
			[/if]
# HITPOINTS
			[set_variable]
				name=hp
				rand=-26%,-13%,-13%,-6%,-5%,-4%,-3%,0%,0%,6%,8%,10%,12%,25%,25%,51%
			[/set_variable]
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=hitpoints
					increase_total=$hp
				[/effect]
				silent=yes
			[/object]
# MOVEMENT
			[set_variable]
				name=move
				rand=-26%,-13%,-13%,0%,0%,0%,25%,25%,51%
			[/set_variable]
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=movement
					increase=$move
				[/effect]
				silent=yes
			[/object]
# MAX_EXPERIENCE
			[set_variable]
				name=xp
				rand=-26%,-13%,-13%,-6%,-5%,-4%,-3%,0%,0%,6%,8%,10%,12%,25%,25%,51%
			[/set_variable]
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=max_experience
					increase=$xp
				[/effect]
				silent=yes
			[/object]
# MOVECOSTS
			{MOVECOSTSETFORTYPESMALLRANGE deep_water}
			{MOVECOSTSETFORTYPESMALLRANGE shallow_water}
			{MOVECOSTSETFORTYPESMALLRANGE reef}
			{MOVECOSTSETFORTYPESMALLRANGE swamp_water}
			{MOVECOSTSETFORTYPESMALLRANGE flat}
			{MOVECOSTSETFORTYPESMALLRANGE sand}
			{MOVECOSTSETFORTYPESMALLRANGE forest}
			{MOVECOSTSETFORTYPESMALLRANGE hills}
			{MOVECOSTSETFORTYPESMALLRANGE mountains}
			{MOVECOSTSETFORTYPESMALLRANGE village}
			{MOVECOSTSETFORTYPESMALLRANGE castle}
			{MOVECOSTSETFORTYPESMALLRANGE cave}
			{MOVECOSTSETFORTYPESMALLRANGE frozen}
			{MOVECOSTSETFORTYPESMALLRANGE unwalkable}
			{MOVECOSTSETFORTYPESMALLRANGE fungus}
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=movement_costs
					replace=no
					[movement_costs]
						deep_water=$deep_waterca
						shallow_water=$shallow_waterca
						reef=$reefca
						swamp_water=$swamp_waterca
						flat=$flatca
						sand=$sandca
						forest=$forestca
						hills=$hillsca
						mountains=$mountainsca
						village=$villageca
						castle=$castleca
						cave=$caveca
						frozen=$frozenca
						unwalkable=$unwalkableca
						fungus=$fungusca
					[/movement_costs]
				[/effect]
				silent=yes
			[/object]
# DEFENSE
			{DEFORRESCOSTSETFORTYPERANGE deep_water}
			{DEFORRESCOSTSETFORTYPERANGE shallow_water}
			{DEFORRESCOSTSETFORTYPERANGE reef}
			{DEFORRESCOSTSETFORTYPERANGE swamp_water}
			{DEFORRESCOSTSETFORTYPERANGE flat}
			{DEFORRESCOSTSETFORTYPERANGE sand}
			{DEFORRESCOSTSETFORTYPERANGE forest}
			{DEFORRESCOSTSETFORTYPERANGE hills}
			{DEFORRESCOSTSETFORTYPERANGE mountains}
			{DEFORRESCOSTSETFORTYPERANGE village}
			{DEFORRESCOSTSETFORTYPERANGE castle}
			{DEFORRESCOSTSETFORTYPERANGE cave}
			{DEFORRESCOSTSETFORTYPERANGE frozen}
			{DEFORRESCOSTSETFORTYPERANGE unwalkable}
			{DEFORRESCOSTSETFORTYPERANGE fungus}
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=defense
					replace=no
					[defense]
						deep_water=$deep_waterdt
						shallow_water=$shallow_waterdt
						reef=$reefdt
						swamp_water=$swamp_waterdt
						flat=$flatdt
						sand=$sanddt
						forest=$forestdt
						hills=$hillsdt
						mountains=$mountainsdt
						village=$villagedt
						castle=$castledt
						cave=$cavedt
						frozen=$frozendt
						unwalkable=$unwalkabledt
						fungus=$fungusdt
					[/defense]
				[/effect]
				silent=yes
			[/object]
# RESISTANCES
			{DEFORRESCOSTSETFORTYPERANGE blade}
			{DEFORRESCOSTSETFORTYPERANGE pierce}
			{DEFORRESCOSTSETFORTYPERANGE impact}
			{DEFORRESCOSTSETFORTYPERANGE fire}
			{DEFORRESCOSTSETFORTYPERANGE cold}
			{DEFORRESCOSTSETFORTYPERANGE arcane}
			[object]
				[filter]
					id={ID}
				[/filter]
				[effect]
					apply_to=resistance
					replace=no
					[resistance]
						blade=$bladedt
						pierce=$piercedt
						impact=$impactdt
						fire=$firedt
						cold=$colddt
						arcane=$arcanedt
					[/resistance]
				[/effect]
				silent=yes
			[/object]
# ABILITIES
# DE-BABY
			[store_unit]
				[filter]
					id={ID}
				[/filter]
				variable=evolver
				kill=no
			[/store_unit]
			{VARIABLE_OP evolver.id value ""}
			{VARIABLE_OP evolver.hitpoints value $evolver.max_hitpoints}
			[unstore_unit]
				variable=evolver
				replace=yes
			[/unstore_unit]
#enddef
# ABILITIES
#define NOTWORKINNOW
			[set_variable]
				name=has
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=haa
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=hae
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=hv
				rand=-9,-8.-7,-6,-5,-4,-3,-2,-1,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9
			[/set_variable]
			[set_variable]
				name=hp
				rand=slowed,cured
			[/set_variable]
			[set_variable]
				name=ras
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=raa
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=rae
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=rv
				rand=-9,-8.-7,-6,-5,-4,-3,-2,-1,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9
			[/set_variable]
			[set_variable]
				name=rsp
				rand=slowed,cured
			[/set_variable]
			[set_variable]
				name=rsas
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=rsaa
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=rsae
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=rsmv
				rand=100
			[/set_variable]
			[set_variable]
				name=rsa
				rand=-9,-8.-7,-6,-5,-4,-3,-2,-1,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9
			[/set_variable]
			[set_variable]
				name=rsapt
				rand=blade,pierce,impact,fire,cold,arcane
			[/set_variable]
			[set_variable]
				name=rsavn
				rand=defense,offense
			[/set_variable]
			[set_variable]
				name=las
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=laa
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=lae
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=lav
				rand=-5,-3,-3,-2,-2,-2,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,5
			[/set_variable]
			[set_variable]
				name=ias
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=iaa
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=iae
				rand=yes,no
			[/set_variable]
			[set_variable]
				name=iav
				rand=-5,-3,-3,-2,-2,-2,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,5
			[/set_variable]
			[object]
				[filter]
					id=baby
				[/filter]
				[effect]
					apply_to=new_ability
					[abilities]
						[heals]
							name="heals"
							affect_self=$has
							affect_allies=$haa
							affect_enemies=$hae
							cumulative=yes
							value=$hv
							poison=$hp
						[/heals]
						[regenerate]
							name="regenerates"
							affect_self=$ras
							affect_allies=$raa
							affect_enemies=$rae
							cumulative=yes
							value=$rv
							poison=$rp
						[/regenerate]
						[resistance]
							name="resists"
							affect_self=$rsas
							affect_allies=$rsaa
							affect_enemies=$rsae
							cumulative=yes
							add=$rsa
							apply_to=$rsapt
							active_on=$rsavn
						[/resistance]
						[leadership]
							name="leads"
							affect_self=$las
							affect_allies=$laa
							affect_enemies=$lae
							cumulative=yes
							value=$lv
						[/leadership]
						[leadership]
							name="illuminates"
							affect_self=$ias
							affect_allies=$iaa
							affect_enemies=$ae
							cumulative=yes
							value=$iv
						[/leadership]
					[/abilities]
				[/effect]
				silent=yes
			[/object]
#enddef
#define STOPCRUITIF SIDE VAR
    [event]
	name=turn 1 end
	[if]
		[variable]
			name={VAR}
			equals=yes
		[/variable]
		[then]
			[set_recruit]
				side={SIDE}
				recruit=
			[/set_recruit]
		[/then]
	[/if]
    [/event]
#enddef
